<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Anshika - Can I Ask You Something? ‚ú®</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { 
            height: 100%; overflow: hidden; 
            font-family: 'Dancing Script', cursive; 
            background: linear-gradient(45deg, #0f0f23, #1a1a3e, #2a1a4e); 
            color: #fff; 
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        .page { position: absolute; width: 100%; height: 100%; opacity: 0; transition: opacity 0.8s ease-in-out; overflow-y: auto; }
        .page.active { opacity: 1; z-index: 10; }
        
        #stars, #hearts { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .star { position: absolute; background: linear-gradient(45deg, #fff, #ffd700); border-radius: 50%; 
                animation: twinkle 3s infinite; box-shadow: 0 0 10px #fff; }
        @keyframes twinkle { 0%, 100% { opacity: 0.4; transform: scale(1); } 50% { opacity: 1; transform: scale(1.5); } }
        @keyframes explode { 0% { transform: scale(0) translateY(0); opacity: 1; } 100% { transform: scale(3) translateY(-100px); opacity: 0; } }

        .page-content { 
            min-height: 100vh; padding: 20px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; 
            position: relative; z-index: 2;
        }
        
        h1 { font-size: clamp(2.5em, 8vw, 5em); text-shadow: 0 0 40px #ff69b4; animation: glow 2s infinite; margin-bottom: 5vw; line-height: 1.2; }
        @keyframes glow { 0%, 100% { text-shadow: 0 0 30px #ff69b4; } 50% { text-shadow: 0 0 60px #ff1493; } }
        
        #permission-text { font-size: clamp(1.5em, 6vw, 2.5em); margin: 5vw 0; white-space: nowrap; overflow: hidden; 
                          border-right: 4px solid #ff69b4; animation: typing 4s steps(50) forwards, blink 1s infinite 4s; }
        @keyframes typing { from { width: 0; } to { width: 100%; } }
        @keyframes blink { 0%, 50% { border-color: transparent; } 51%, 100% { border-color: #ff69b4; } }

        #camera-container { margin: 5vw 0; text-align: center; width: 100%; max-width: 400px; }
        #video { width: clamp(250px, 80vw, 350px); height: clamp(200px, 65vw, 280px); border-radius: 20px; 
                 border: 5px solid #ff69b4; box-shadow: 0 20px 40px rgba(255,105,180,0.4); object-fit: cover; }

        .btn { padding: clamp(15px, 4vw, 25px) clamp(30px, 8vw, 60px); font-size: clamp(1.2em, 5vw, 2em); border: none; 
               border-radius: 50px; cursor: pointer; font-family: inherit; margin: 3vw; min-height: 70px;
               transition: all 0.3s ease; box-shadow: 0 15px 30px rgba(0,0,0,0.3); touch-action: manipulation; }
        .yes-btn { background: linear-gradient(45deg, #ff4757, #ff6b9d); color: white; }
        .no-btn { background: transparent; color: white; border: 4px solid #fff; }
        .btn:active { transform: scale(0.95) !important; }

        .heart3d { position: absolute; width: clamp(20px, 3vw, 30px); height: clamp(18px, 2.5vw, 28px); animation: float3d 10s infinite linear; }
        .heart3d:before, .heart3d:after { position: absolute; content: ""; width: 50%; height: 80%; 
            background: linear-gradient(45deg, #ff69b4, #ff1493); border-radius: 50% 50% 0 0; }
        .heart3d:before { transform: rotate(-45deg); left: 25%; }
        .heart3d:after { transform: rotate(45deg); left: 0; }
        @keyframes float3d { 0% { transform: translateY(100vh) rotate(0deg); } 100% { transform: translateY(-100px) rotate(720deg); } }

        #story-text { font-size: clamp(1.2em, 4vw, 2em); margin: 5vw 0; line-height: 1.5; max-width: 90vw; padding: 0 5vw; }
        
        /* MAGIC PHOTO FILTER ‚ú® */
        #photo-orb { 
            position: relative; 
            width: clamp(280px, 70vw, 400px); 
            height: clamp(280px, 70vw, 400px); 
            border-radius: 50%; 
            background: radial-gradient(circle, rgba(255,105,180,0.4), transparent); 
            animation: orbFloat 6s ease-in-out infinite; 
            box-shadow: 0 0 60px #ff69b4, inset 0 0 40px rgba(255,255,255,0.1); 
            margin: 5vw 0; 
        }
        #captured-photo { 
            position: absolute; 
            top: clamp(20px, 4vw, 35px); 
            left: clamp(20px, 4vw, 35px); 
            width: calc(100% - clamp(40px, 8vw, 70px)); 
            height: calc(100% - clamp(40px, 8vw, 70px)); 
            border-radius: 50%; 
            object-fit: cover; 
            /* ‚ú® ROMANTIC PHOTO FILTER ‚ú® */
            filter: brightness(1.1) contrast(1.15) saturate(1.3) sepia(20%) 
                    drop-shadow(0 0 20px rgba(255,105,180,0.8)) 
                    hue-rotate(10deg);
            animation: photoGlow 3s infinite; 
            box-shadow: 0 0 30px rgba(255,255,255,0.6), 
                        0 0 60px rgba(255,105,180,0.4);
        }
        @keyframes orbFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        @keyframes photoGlow { 0%, 100% { filter: brightness(1.1) contrast(1.15) saturate(1.3) sepia(20%) hue-rotate(10deg); box-shadow: 0 0 30px rgba(255,255,255,0.6), 0 0 60px rgba(255,105,180,0.4); } 
                          50% { filter: brightness(1.2) contrast(1.2) saturate(1.4) sepia(25%) hue-rotate(15deg); box-shadow: 0 0 50px rgba(255,255,255,0.8), 0 0 80px rgba(255,105,180,0.6); } }

        #proposal-cube { width: clamp(300px, 80vw, 450px); height: clamp(90px, 20vw, 140px); margin: 5vw 0; transform-style: preserve-3d; 
                         animation: cubeRotate 10s infinite linear; position: relative; }
        .cube-face { position: absolute; width: 100%; height: 100%; background: linear-gradient(45deg, #ff6b9d, #ff8e8e);
                     border: 4px solid rgba(255,255,255,0.4); border-radius: 25px; font-size: clamp(1.5em, 5vw, 2.5em); 
                     font-weight: bold; display: flex; align-items: center; justify-content: center; box-shadow: 0 30px 60px rgba(0,0,0,0.4); }
        .cube-face:nth-child(1) { transform: translateZ(50px); }
        .cube-face:nth-child(2) { transform: rotateY(90deg) translateZ(50px); }
        .cube-face:nth-child(3) { transform: rotateY(180deg) translateZ(50px); }
        .cube-face:nth-child(4) { transform: rotateY(-90deg) translateZ(50px); }
        @keyframes cubeRotate { 0% { transform: rotateX(20deg) rotateY(0deg); } 100% { transform: rotateX(20deg) rotateY(360deg); } }

        #no-section { display: none; margin: 5vw 0; }
        #no-input { width: clamp(250px, 70vw, 400px); height: clamp(60px, 12vw, 80px); padding: 20px; font-size: clamp(1em, 4vw, 1.5em); 
                    border: 3px solid #ff69b4; border-radius: 30px; background: rgba(255,255,255,0.1); color: white; text-align: center; 
                    font-family: inherit; margin: 3vw 0; }
        #no-input::placeholder { color: rgba(255,255,255,0.7); }
    </style>
</head>
<body>
    <!-- PAGE 1: Can I ask you something? -->
    <div id="page1" class="page active">
        <div id="stars"></div>
        <div class="page-content">
            <h1>Hey Anshika! üíñ</h1>
            <p id="permission-text">Can I ask you something important? ‚ú®</p>
            <button class="btn yes-btn" onclick="goToPage2()">Yes üòä</button>
            <button class="btn no-btn" onclick="exitPage()">Maybe later... üòè</button>
        </div>
    </div>

    <!-- PAGE 2: Story Message + Camera -->
    <div id="page2" class="page">
        <div id="hearts"></div>
        <div id="stars2"></div>
        <div class="page-content">
            <h1>I've asked you many times before... üíî</h1>
            <p id="story-text" style="font-size: clamp(1.3em, 5vw, 2.2em); margin: 5vw 0; line-height: 1.4;">
                But you haven't said yes or no clearly... <br>
                Your smile lights up my entire world, even from Muzaffarpur. üíñ<br><br>
                <span style="font-size: clamp(1.1em, 4vw, 1.8em);">Now let me capture this beautiful moment...</span>
            </p>
            <div id="camera-container" style="display: none;">
                <video id="video" autoplay playsinline muted></video><br>
                <button class="btn yes-btn" onclick="capturePhotoAndGoToPage3()">üì∏ Take My Photo</button>
            </div>
            <button id="show-camera-btn" class="btn yes-btn" onclick="showCamera()" style="background: linear-gradient(45deg, #ff6b9d, #ff8e8e);">Show Camera üòç</button>
        </div>
    </div>

    <!-- PAGE 3: Will you be my GF? -->
    <div id="page3" class="page">
        <div id="hearts3"></div>
        <div id="stars3"></div>
        <div class="page-content">
            <h1 id="page3-title">Anshika... üíï</h1>
            <div id="photo-orb">
                <img id="captured-photo" src="" alt="Anshika's Beautiful Smile" style="display: none;">
            </div>
            <div id="proposal-cube">
                <div class="cube-face">Will you be my girlfriend Anshika? üåπ</div>
                <div class="cube-face">I love you more than anything! üíï</div>
                <div class="cube-face">Please say YES today! ‚ú®</div>
                <div class="cube-face">Be mine forever? üòç</div>
            </div>
            
            <button class="btn yes-btn" onclick="finalYes()">YES! I love you too! üíñ</button>
            <button class="btn no-btn" onclick="showNoSection()">No üòî</button>
            
            <div id="no-section" style="display: none;">
                <p style="font-size: clamp(1.2em, 4vw, 1.8em); margin: 3vw 0;">If No, so why? üòî</p>
                <input type="text" id="no-input" placeholder="Tell me why Anshika... üíî">
                <button class="btn" style="background: linear-gradient(45deg, #ff9f43, #ff6b35);" onclick="submitNo()">Submit Reason</button>
            </div>

            <div id="yes-message" style="display: none; font-size: clamp(1.5em, 5vw, 2.5em); margin-top: 5vw;">
                YAYYY ANSHIKA! üéâüíñ<br>I LOVE YOU FOREVER! Let's make beautiful memories from Muzaffarpur! ‚ú®üíï
            </div>
        </div>
    </div>

    <script>
        let stream = null;
        let video = null;
        let capturedPhotoData = '';
        const YOUR_EMAIL = "rajtanishq048@gmail.com";
        
        // Stars for all pages
        function createStars(containerId) {
            const container = document.getElementById(containerId);
            for(let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + 'vw';
                star.style.top = Math.random() * 100 + 'vh';
                star.style.width = star.style.height = (Math.random() * 3 + 1) + 'px';
                star.style.animationDelay = Math.random() * 3 + 's';
                container.appendChild(star);
            }
        }
        createStars('stars');
        createStars('stars2');
        createStars('hearts3');
        createStars('stars3');

        // Hearts
        function createHeart(containerId) {
            const container = document.getElementById(containerId);
            const heart = document.createElement('div');
            heart.className = 'heart3d';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 5 + 8) + 's';
            container.appendChild(heart);
            setTimeout(() => heart.remove(), 13000);
        }
        setInterval(() => createHeart('hearts'), 300);
        setInterval(() => createHeart('hearts3'), 300);

        // PAGE 1 FUNCTIONS
        function goToPage2() {
            document.getElementById('page1').classList.remove('active');
            document.getElementById('page2').classList.add('active');
        }

        function exitPage() {
            window.close();
            document.body.innerHTML = '<h1 style="text-align:center;font-size:3em;color:#ff69b4;margin-top:40vh;">See you later Anshika üíñ</h1>';
            setTimeout(() => window.close(), 2000);
        }

        // PAGE 2 FUNCTIONS - FIXED CAMERA
        async function showCamera() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        facingMode: 'user', 
                        width: { ideal: 640 }, 
                        height: { ideal: 480 } 
                    } 
                });
                
                video = document.getElementById('video');
                video.srcObject = stream;
                video.play();
                
                document.getElementById('camera-container').style.display = 'block';
                document.getElementById('show-camera-btn').style.display = 'none';
                
                console.log('Camera started successfully!');
            } catch(err) {
                console.error('Camera error:', err);
                alert('Camera permission needed! Tap "Allow" in browser popup üíñ');
            }
        }

        function capturePhotoAndGoToPage3() {
            if (!video || !video.videoWidth || video.videoWidth === 0) {
                alert('Please wait 2 seconds for camera to load fully, then try again! üì∏');
                return;
            }
            
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            // APPLY MAGIC FILTER TO CANVAS (romantic pink glow)
            context.filter = 'brightness(1.1) contrast(1.15) saturate(1.3) sepia(20%) hue-rotate(10deg)';
            context.drawImage(canvas, 0, 0);
            
            capturedPhotoData = canvas.toDataURL('image/jpeg', 0.9);
            console.log('‚ú® MAGIC PHOTO CAPTURED WITH FILTER!');
            
            // Stop camera
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
            
            // Show filtered photo on page 3
            document.getElementById('captured-photo').src = capturedPhotoData;
            document.getElementById('captured-photo').style.display = 'block';
            
            // Go to page 3
            document.getElementById('page2').classList.remove('active');
            document.getElementById('page3').classList.add('active');
        }

        // PAGE 3 FUNCTIONS
        function finalYes() {
            sendEmail('YES! ‚ù§Ô∏è', 'Anshika said YES! üéâ');
            document.getElementById('page3-title').innerHTML = 'ANSHIKA SAID YES! üéâüíñ';
            document.querySelectorAll('#page3 .btn').forEach(btn => btn.style.display = 'none');
            document.getElementById('no-section').style.display = 'none';
            document.getElementById('yes-message').style.display = 'block';
            
            // Fireworks
            for(let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.style.cssText = `
                        position: fixed; width: 8px; height: 8px; background: #ff69b4; border-radius: 50%;
                        left: ${Math.random()*100}vw; top: ${Math.random()*60}vh;
                        box-shadow: 0 0 20px #ff69b4; animation: explode 2s ease-out forwards;
                        pointer-events: none; z-index: 1000;
                    `;
                    document.body.appendChild(firework);
                    setTimeout(() => firework.remove(), 2000);
                }, i * 25);
            }
        }

        function showNoSection() {
            document.querySelector('#page3 .btn.yes-btn').style.display = 'none';
            document.querySelector('#page3 .btn.no-btn').style.display = 'none';
            document.getElementById('no-section').style.display = 'block';
        }

        function submitNo() {
            const reason = document.getElementById('no-input').value || 'No reason given';
            sendEmail('NO üíî', `Anshika said NO. Reason: "${reason}"`);
            alert('Thank you for being honest Anshika üíî. I respect your feelings. Take care! ‚ù§Ô∏è');
        }

        // EMAIL WITH FILTERED PHOTO + RESULT
        function sendEmail(response, message) {
            const subject = encodeURIComponent(`Anshika's Final Answer: ${response}`);
            const body = encodeURIComponent(
                `üö® ANSHIKA'S ANSWER üö®\n\n` +
                `Response: ${response}\n` +
                `Message: ${message}\n` +
                `Time: ${new Date().toLocaleString('en-IN', {timeZone: 'Asia/Kolkata'})}\n\n` +
                `üì∏ FILTERED PHOTO: ${capturedPhotoData}\n\n` +
                `üíñ From Muzaffarpur Love Proposal ‚ú®`
            );
            window.open(`mailto:rajtanishq048@gmail.com?subject=${subject}&body=${body}`, '_blank');
        }
    </script>
</body>
</html>
